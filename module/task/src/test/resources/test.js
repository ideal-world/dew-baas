!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).JVM=e()}}((function(){return function e(t,n,o){function r(c,u){if(!n[c]){if(!t[c]){var s="function"==typeof require&&require;if(!u&&s)return s(c,!0);if(i)return i(c,!0);var a=new Error("Cannot find module '"+c+"'");throw a.code="MODULE_NOT_FOUND",a}var d=n[c]={exports:{}};t[c][0].call(d.exports,(function(e){return r(t[c][1][e]||e)}),d,d.exports,e,t,n,o)}return n[c].exports}for(var i="function"==typeof require&&require,c=0;c<o.length;c++)r(o[c]);return r}({1:[function(e,t,n){t.exports={ak:"ak1",sk:"sk1",env:{dev:{ak:"ak_dev",sk:"sk_dev",db:{url:"mysqlxxxx"}},test:{},prod:{}}}},{}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const o=e("@idealworld/sdk/dist/jvm");n.DewSDK=o.DewSDK,o.DewSDK.init("REPLACE_IT",""),o.DewSDK.setting.ajax(((e,t,n)=>new Promise(((o,r)=>{try{o({data:JSON.parse($.req(e,t,n))})}catch(e){r({message:e.getMessage(),stack:[]})}})))),o.DewSDK.setting.currentTime((()=>$.currentTime())),o.DewSDK.setting.signature(((e,t)=>$.signature(e,t)));const r=e("./TodoAction1.test");n.TodoAction1_test=r;const i=e("./TodoAction2.test");n.TodoAction2_test=i},{"./TodoAction1.test":3,"./TodoAction2.test":4,"@idealworld/sdk/dist/jvm":7}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.addItem=n.fetchItems=n.db=void 0;const o=e("@idealworld/sdk/dist/jvm"),r=e("@idealworld/sdk/dist/domain/Enum");let i=e("../../../dew.json");const c=o.DewSDK.conf(i,"prod"),u=c.db.url,s=c.db.user,a=c.db.pwd;n.db=o.DewSDK.reldb.subject("todoDB"),async function(){await o.DewSDK.iam.resource.subject.create("todoDB",r.ResourceKind.RELDB,"ToDo数据库",u,s,a),await n.db.exec("create table if not exists todo\n(\n    id bigint auto_increment primary key,\n    create_time timestamp default CURRENT_TIMESTAMP null comment '创建时间',\n    create_user varchar(255) not null comment '创建者OpenId',\n    content varchar(255) not null comment '内容'\n)\ncomment '任务表'",[]),await n.db.exec("insert into todo(content,create_user) values (?,?)",["这是个示例",""])}(),n.fetchItems=async function(){return async function(){if(null==o.DewSDK.iam.auth.fetch())return[];if(o.DewSDK.iam.auth.fetch()?.roleInfo.some((e=>"APP_ADMIN"===e.defCode)))return n.db.exec("select * from todo",[]);return n.db.exec("select * from todo where create_user = ?",[o.DewSDK.iam.auth.fetch()?.accountCode])}()},n.addItem=async function(e){if(null==o.DewSDK.iam.auth.fetch())throw"请先登录";return await o.DewSDK.cache.set("xxx",e),n.db.exec("insert into todo(content,create_user) values (?, ?)",[e,o.DewSDK.iam.auth.fetch()?.accountCode]).then((()=>null))}},{"../../../dew.json":1,"@idealworld/sdk/dist/domain/Enum":6,"@idealworld/sdk/dist/jvm":7}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ioTestDtos=n.ioTestDto=n.ioTestMap=n.ioTestObj=n.ioTestArr3=n.ioTestArr2=n.ioTestArr=n.ioTestNum=n.ioTestStr=n.removeItem=void 0;const o=e("@idealworld/sdk/dist/jvm"),r=e("./TodoAction1.test");n.removeItem=async function(e){return o.DewSDK.iam.auth.fetch()?.roleInfo.some((e=>"APP_ADMIN"===e.defCode))?r.db.exec("delete from todo where id = ? ",[e]).then((()=>null)):r.db.exec("delete from todo where id = ? and create_user = ?",[e,o.DewSDK.iam.auth.fetch()?.accountCode]).then((e=>{if(1===e[0])return null;throw"权限错误"}))},n.ioTestStr=async function(e,t,n,o){return e},n.ioTestNum=async function(e,t,n,o){return t},n.ioTestArr=async function(e,t,n,o){return n},n.ioTestArr2=async function(){return["xxxcxccc"]},n.ioTestArr3=async function(){return[{id:1,content:"xxxcxccc",createUserName:"",createUserId:""}]},n.ioTestObj=async function(e,t,n,o){return o},n.ioTestMap=async function(e){return e.add="add",e},n.ioTestDto=async function(e){return e.createUserId="100",e},n.ioTestDtos=async function(e){return e[0].createUserId="100",e}},{"./TodoAction1.test":3,"@idealworld/sdk/dist/jvm":7}],5:[function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return r(t,e),t};Object.defineProperty(n,"__esModule",{value:!0}),n.SDK=void 0;const c=i(e("./util/Request")),u=i(e("./module/IAMSDK")),s=i(e("./module/CacheSDK")),a=i(e("./module/HttpSDK")),d=i(e("./module/RelDBSDK")),l=i(e("./module/TaskSDK"));n.SDK={init:function(e,t){n.SDK.setting.serverUrl(e),n.SDK.setting.appId(t)},conf:function(e,t){const n="string"==typeof e?JSON.parse(e.trim()):e;if(console.log("Load config "+t+" ENV "),n.hasOwnProperty("env")&&n.env.hasOwnProperty(t)){let e=n.env[t];delete n.env;for(let t in n)e.hasOwnProperty(t)||(e[t]=n[t]);return e}return delete n.env,n},iam:u.iamSDK,reldb:d.reldbSDK(),cache:s.cacheSDK(),http:a.httpSDK(),task:l.taskSDK(),setting:{serverUrl:function(e){c.setServerUrl(e)},appId:function(e){c.setAppId(e),u.init(e),d.init(e),s.init(e),a.init(e),l.init(e),n.SDK.reldb=d.reldbSDK(),n.SDK.cache=s.cacheSDK(),n.SDK.http=a.httpSDK(),n.SDK.task=l.taskSDK()},aksk:function(e,t){c.setToken(""),c.setAkSk(e,t)},ajax:function(e){c.setAjaxImpl(e)},currentTime:function(e){c.setCurrentTime(e)},signature:function(e){c.setSignature(e)}}}},{"./module/CacheSDK":8,"./module/HttpSDK":9,"./module/IAMSDK":10,"./module/RelDBSDK":11,"./module/TaskSDK":12,"./util/Request":13}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.AuthSubjectKind=n.ResourceKind=n.AccountIdentKind=n.CommonStatus=n.OptActionKind=void 0,function(e){e.EXISTS="EXISTS",e.FETCH="FETCH",e.CREATE="CREATE",e.MODIFY="MODIFY",e.PATCH="PATCH",e.DELETE="DELETE"}(n.OptActionKind||(n.OptActionKind={})),function(e){e.DISABLED="DISABLED",e.ENABLED="ENABLED"}(n.CommonStatus||(n.CommonStatus={})),function(e){e.USERNAME="USERNAME",e.AUTH_IDENT="AUTH-IDENT",e.PHONE="PHONE",e.EMAIL="EMAIL",e.WECHAT_XCX="WECHAT-XCX"}(n.AccountIdentKind||(n.AccountIdentKind={})),function(e){e.MENU="MENU",e.ELEMENT="ELEMENT",e.OAUTH="OAUTH",e.RELDB="RELDB",e.CACHE="CACHE",e.MQ="MQ",e.OBJECT="OBJECT",e.TASK="TASK",e.HTTP="HTTP"}(n.ResourceKind||(n.ResourceKind={})),function(e){e.TENANT="TENANT",e.APP="APP",e.ROLE="ROLE",e.GROUP_NODE="GROUP_NODE",e.ACCOUNT="ACCOUNT"}(n.AuthSubjectKind||(n.AuthSubjectKind={}))},{}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.DewSDK=void 0;const o=e("./DewSDK");n.DewSDK=o.SDK},{"./DewSDK":5}],8:[function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return r(t,e),t};Object.defineProperty(n,"__esModule",{value:!0}),n.CacheSDK=n.cacheSDK=n.init=void 0;const c=i(e("../util/Request")),u=e("../domain/Enum");let s="";n.init=function(e){s=e},n.cacheSDK=function(){return new a("default")};class a{constructor(e){this.resourceSubjectCode=".cache."+e}exists(e){return d(e),l("existsCache",s+this.resourceSubjectCode,u.OptActionKind.EXISTS,e)}hexists(e,t){return d(e),l("hexistsCache",s+this.resourceSubjectCode,u.OptActionKind.EXISTS,e+"/"+t)}get(e){return d(e),l("getCache",s+this.resourceSubjectCode,u.OptActionKind.FETCH,e)}hgetall(e){return d(e),l("hgetallCache",s+this.resourceSubjectCode,u.OptActionKind.FETCH,e+"/*")}hget(e,t){return d(e),l("hgetCache",s+this.resourceSubjectCode,u.OptActionKind.FETCH,e+"/"+t)}del(e){return d(e),l("delCache",s+this.resourceSubjectCode,u.OptActionKind.DELETE,e)}hdel(e,t){return d(e),l("hdelCache",s+this.resourceSubjectCode,u.OptActionKind.DELETE,e+"/"+t)}incrby(e,t){return d(e),l("incrbyCache",s+this.resourceSubjectCode,u.OptActionKind.CREATE,e+"?incr=true",t+"")}hincrby(e,t,n){return d(e),l("hincrbyCache",s+this.resourceSubjectCode,u.OptActionKind.CREATE,e+"/"+t+"?incr=true",n+"")}set(e,t){return d(e),l("setCache",s+this.resourceSubjectCode,u.OptActionKind.CREATE,e,t)}hset(e,t,n){return d(e),l("hsetCache",s+this.resourceSubjectCode,u.OptActionKind.CREATE,e+"/"+t,n)}setex(e,t,n){return d(e),l("setexCache",s+this.resourceSubjectCode,u.OptActionKind.CREATE,e+"?expire="+n,t)}expire(e,t){return d(e),l("expireCache",s+this.resourceSubjectCode,u.OptActionKind.CREATE,e+"?expire="+t)}subject(e){return new a(e)}}function d(e){if(-1!==e.indexOf("/"))throw"key不能包含[/]"}function l(e,t,n,o,r){return c.req(e,"cache://"+t+"/"+o,n,r)}n.CacheSDK=a},{"../domain/Enum":6,"../util/Request":13}],9:[function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return r(t,e),t};Object.defineProperty(n,"__esModule",{value:!0}),n.HttpSDK=n.httpSDK=n.init=void 0;const c=i(e("../util/Request")),u=e("../domain/Enum");let s="";n.init=function(e){s=e},n.httpSDK=function(){return new a("default")};class a{constructor(e){this.resourceSubjectCode=".http."+e}get(e,t){return d(s+this.resourceSubjectCode,u.OptActionKind.FETCH,e,t)}delete(e,t){return d(s+this.resourceSubjectCode,u.OptActionKind.DELETE,e,t)}post(e,t,n){return d(s+this.resourceSubjectCode,u.OptActionKind.CREATE,e,n,t)}put(e,t,n){return d(s+this.resourceSubjectCode,u.OptActionKind.MODIFY,e,n,t)}patch(e,t,n){return d(s+this.resourceSubjectCode,u.OptActionKind.PATCH,e,n,t)}subject(e){return new a(e)}}function d(e,t,n,o,r){return n.startsWith("/")||(n="/"+n),o||(o={}),o["Content-Type"]="application/json charset=utf-8",c.req("http","http://"+e+n,t,r,o,!0)}n.HttpSDK=a},{"../domain/Enum":6,"../util/Request":13}],10:[function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return r(t,e),t};Object.defineProperty(n,"__esModule",{value:!0}),n.iamSDK=n.init=void 0;const c=i(e("../util/Request")),u=e("../domain/Enum");let s=null,a="";n.init=function(e){a=e};const d={fetchLoginInfo:()=>s,createLoginInfo(e){null===e||""===e.trim()?d.setLoginInfo(null):d.setLoginInfo(JSON.parse(e))},setLoginInfo(e){s=e,null===s?c.setToken(""):c.setToken(s.token)}},l={login:(e,t)=>(c.setToken(""),c.req("login","http://iam/common/login",u.OptActionKind.CREATE,{ak:e,sk:t,relAppCode:a}).then((e=>(s=e,c.setToken(e.token),e)))),logout:()=>c.req("logout","http://iam/common/logout",u.OptActionKind.DELETE).then((()=>{c.setToken("")})),registerAccount:e=>c.req("registerAccount","http://iam/console/tenant/account",u.OptActionKind.CREATE,{name:e}),createAccountIdent:(e,t,n,o)=>c.req("addAccountIdent","http://iam/console/tenant/account/"+e+"/ident",u.OptActionKind.CREATE,{kind:t,ak:n,sk:o}),bindApp:(e,t)=>c.req("bindApp","http://iam/console/tenant/account/"+e+"/app/"+t,u.OptActionKind.CREATE),bindRole:(e,t)=>c.req("bindRole","http://iam/console/tenant/account/"+e+"/role/"+t,u.OptActionKind.CREATE)},f={fetchMenu:()=>c.req("fetchMenu","menu://iam/common/resource?kind=menu",u.OptActionKind.FETCH),fetchEle:()=>c.req("fetchEle","element://iam/common/resource?kind=element",u.OptActionKind.FETCH),createResourceSubject:(e,t,n,o,r,i)=>c.req("createResourceSubject","http://iam/console/app/resource/subject",u.OptActionKind.CREATE,{codePostfix:e,kind:t,name:n,uri:o,ak:r,sk:i}),createResource:(e,t,n)=>c.req("createResource","http://iam/console/app/resource",u.OptActionKind.CREATE,{name:e,pathAndQuery:t,relResourceSubjectId:n})},p={createAuthPolicy:(e,t,n)=>c.req("createAuthPolicy","http://iam/console/app/authpolicy",u.OptActionKind.CREATE,{relSubjectKind:e,relSubjectIds:t,subjectOperator:"EQ",relResourceId:n,resultKind:"ACCEPT"})},h={registerTenant:(e,t,n,o)=>c.req("createTenant","http://iam/common/tenant",u.OptActionKind.CREATE,{tenantName:e,appName:t,accountUserName:n,accountPassword:o}),fetchTenant:()=>c.req("fetchTenant","http://iam/console/tenant/tenant",u.OptActionKind.FETCH)},m={createApp:e=>c.req("createApp","http://iam/console/tenant/app",u.OptActionKind.CREATE,{name:e}),fetchApp:e=>c.req("fetchApp","http://iam/console/tenant/app/"+e,u.OptActionKind.FETCH),fetchPublicKey:()=>c.req("fetchPublicKey","http://iam/console/app/app/publicKey",u.OptActionKind.FETCH),listAppIdents:()=>c.req("listAppIdents","http://iam/console/app/app/ident",u.OptActionKind.FETCH),fetchAppIdentSk:e=>c.req("fetchAppIdentSk","http://iam/console/app/app/ident/"+e+"/sk",u.OptActionKind.FETCH)},A={createRoleDef:(e,t)=>c.req("createRoleDef","http://iam/console/app/role/def",u.OptActionKind.CREATE,{code:e,name:t}),createRole:e=>c.req("createRole","http://iam/console/app/role",u.OptActionKind.CREATE,{relRoleDefId:e})};n.iamSDK={auth:{fetch:d.fetchLoginInfo,create:d.createLoginInfo,set:d.setLoginInfo},account:{login:l.login,logout:l.logout,register:l.registerAccount,bindApp:l.bindApp,bindRole:l.bindRole,ident:{create:l.createAccountIdent}},resource:{create:f.createResource,subject:{create:f.createResourceSubject},menu:{fetch:f.fetchMenu},ele:{fetch:f.fetchEle}},tenant:{register:h.registerTenant,fetch:h.fetchTenant},app:{create:m.createApp,fetch:m.fetchApp,ident:{list:m.listAppIdents,fetchSk:m.fetchAppIdentSk},key:{fetchPublicKey:m.fetchPublicKey}},role:{createRoleDef:A.createRoleDef,createRole:A.createRole},policy:{create:p.createAuthPolicy}}},{"../domain/Enum":6,"../util/Request":13}],11:[function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return r(t,e),t};Object.defineProperty(n,"__esModule",{value:!0}),n.RelDBSDK=n.reldbSDK=n.init=void 0;const c=i(e("../util/Request")),u=e("../domain/Enum");let s="";n.init=function(e){s=e},n.reldbSDK=function(){return new a("default")};class a{constructor(e){this.resourceSubjectCode=".reldb."+e}exec(e,t){return function(e,t,n){let o=t.trim().toLocaleLowerCase(),r=o.startsWith("select ")&&-1!==o.indexOf(" from ")?"FETCH":o.startsWith("insert ")&&-1!==o.indexOf(" into ")&&-1!==o.indexOf(" values ")?"CREATE":o.startsWith("update ")&&-1!==o.indexOf(" set ")&&-1!==o.indexOf(" where ")?"MODIFY":o.startsWith("delete ")&&-1!==o.indexOf(" where ")?"DELETE":o.startsWith("create table ")?"CREATE":null;if(null==r)throw"SQL操作不合法:"+t.trim();return c.req("reldb","reldb://"+e,u.OptActionKind[r],JSON.stringify({sql:t.trim(),parameters:n}))}(s+this.resourceSubjectCode,e,t)}subject(e){return new a(e)}}n.RelDBSDK=a},{"../domain/Enum":6,"../util/Request":13}],12:[function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return r(t,e),t};Object.defineProperty(n,"__esModule",{value:!0}),n.TaskSDK=n.taskSDK=n.init=void 0;const c=i(e("../util/Request")),u=e("../domain/Enum");let s="";n.init=function(e){s=e},n.taskSDK=function(){return new a("default")};class a{constructor(e){this.resourceSubjectCode=".task."+e}initTasks(e){return d("initTasks",s+this.resourceSubjectCode,u.OptActionKind.CREATE,"task",e)}create(e,t,n){let o="";return n&&(o="?cron="+encodeURIComponent(n)),d("createTask",s+this.resourceSubjectCode,u.OptActionKind.CREATE,"task/"+e+o,t)}modify(e,t,n){let o="";return n&&(o="?cron="+encodeURIComponent(n)),d("modifyTask",s+this.resourceSubjectCode,u.OptActionKind.MODIFY,"task/"+e+o,t)}delete(e){return d("deleteTask",s+this.resourceSubjectCode,u.OptActionKind.DELETE,"task/"+e)}execute(e,t){return d("executeTask",s+this.resourceSubjectCode,u.OptActionKind.CREATE,"exec/"+e,t)}subject(e){return new a(e)}}function d(e,t,n,o,r){return c.req(e,"task://"+t+"/"+o,n,r,{"Content-Type":"text/plain"})}n.TaskSDK=a},{"../domain/Enum":6,"../util/Request":13}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.req=n.setServerUrl=n.setAkSk=n.setToken=n.setAppId=n.setSignature=n.setCurrentTime=n.setAjaxImpl=n.addMock=n.mock=void 0;let o,r,i,c,u="",s="",a="",d="";const l={};n.mock=function(e){for(let t in e)l[t.toLowerCase()]=e[t]},n.addMock=function(e,t){l[e.toLowerCase()]=t},n.setAjaxImpl=function(e){r=e},n.setCurrentTime=function(e){i=e},n.setSignature=function(e){c=e},n.setAppId=function(e){o=e},n.setToken=function(e){u=e},n.setAkSk=function(e,t){a=e,d=t},n.setServerUrl=function(e){e.trim().endsWith("/")&&(e=e.trim().substring(0,e.trim().length-1)),s=e},n.req=function(e,t,n,f,p,h){if(l.hasOwnProperty(e.toLowerCase()))return console.log("[Dew]Mock request [%s]%s",n,t),new Promise((o=>{o(l[e.toLowerCase()].call(null,n,t,f))}));p=p||{},o&&(p["Dew-App-Id"]=o),p["Dew-Token"]=u||"";let m="/exec?Dew-Resource-Action="+n+"&Dew-Resource-Uri="+encodeURIComponent(t);!function(e,t,n){if(!a||!d)return;let o=t.split("?"),r=o[0],u=2===o.length?o[1]:"";u&&(u=u.split("&").sort(((e,t)=>e<t?-1:1)).join("&"));let s=i();n.Authorization=a+":"+c(e+"\n"+s+"\n"+r+"\n"+u,d),n["Dew-Date"]=s}("post",m,p);let A=s+m;return console.log("[Dew]Request [%s]%s , GW = [%s]",n,t,A),new Promise(((e,t)=>{r(A,p,void 0===f?"":f).then((n=>{let o=n.data;h?e(o):"200"===o.code?e(o.body):(console.error("请求错误 : ["+o.code+"]"+o.message),t("["+o.code+"]"+o.message))})).catch((e=>{console.error("服务错误 : ["+e.message+"]"+e.stack),t(e.message)}))}))}},{}]},{},[2])(2)}));